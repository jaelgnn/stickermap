<div id="map" style="height: 300px; border-radius: 12px; margin-bottom: 16px;"></div>
<input id="coords" type="hidden" name="coords">

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
let map = L.map('map').setView([0, 0], 2);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: 'Â© OpenStreetMap contributors'
}).addTo(map);

let marker = L.marker([0, 0], {draggable: true}).addTo(map);

marker.on('move', () => {
  const pos = marker.getLatLng();
  document.getElementById("coords").value = pos.lat + "," + pos.lng;
});

map.on('click', e => {
  marker.setLatLng(e.latlng);
  document.getElementById("coords").value = e.latlng.lat + "," + e.latlng.lng;
});

navigator.geolocation.getCurrentPosition(
  pos => {
    const lat = pos.coords.latitude;
    const lng = pos.coords.longitude;
    map.setView([lat, lng], 14);
    marker.setLatLng([lat, lng]);
    document.getElementById("coords").value = lat + "," + lng;
  },
  () => {
    map.setView([46, 8], 5);
  }
);
</script>
